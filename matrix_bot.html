import React, { useState } from "react";
import "./App.css";

const sampleMelodies = [
  { title: "Harmony Flow 01", url: "/melodies/sample1.mp3" },
  { title: "Vibe Line 02", url: "/melodies/sample2.mp3" },
  { title: "Choral Loop 03", url: "/melodies/sample3.mp3" }
];

function App() {
  const [password, setPassword] = useState("");
  const [loggedIn, setLoggedIn] = useState(false);
  const [selected, setSelected] = useState(null);

  const handleLogin = () => {
    if (password === "acapella") {
      setLoggedIn(true);
    } else {
      alert("Wrong password. Try again.");
    }
  };

  if (!loggedIn) {
    return (
      <div style={styles.loginContainer}>
        <div style={styles.loginBox}>
          <h2 style={styles.title}>B.JAY Acapella Lab Login</h2>
          <input
            type="password"
            placeholder="Enter password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            style={styles.input}
          />
          <button onClick={handleLogin} style={styles.button}>
            Login
          </button>
        </div>
      </div>
    );
  }

  return (
    <div style={styles.page}>
      <h1 style={styles.heading}>B.JAY Acapella Lab</h1>

      <div style={styles.grid}>
        {sampleMelodies.map((melody, index) => (
          <div key={index} style={styles.card}>
            <h3>{melody.title}</h3>
            <audio controls src={melody.url} style={{ width: "100%" }} />
            <button onClick={() => setSelected(melody)} style={styles.button}>
              Generate Acapella
            </button>
          </div>
        ))}
      </div>

      {selected && (
        <div style={{ marginTop: 30 }}>
          <h2>Generated Acapella for: {selected.title}</h2>
          <audio controls src="/generated/acapella_sample.mp3" />
          <br />
          <a href="/generated/acapella_sample.mp3" download style={styles.link}>
            Download Acapella
          </a>
        </div>
      )}
    </div>
  );
}

const styles = {
  loginContainer: {
    height: "100vh",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    backgroundColor: "#f5f5f5"
  },
  loginBox: {
    padding: 30,
    backgroundColor: "#fff",
    borderRadius: 12,
    boxShadow: "0 4px 10px rgba(0,0,0,0.1)",
    textAlign: "center"
  },
  title: {
    marginBottom: 20,
    fontSize: 22,
    fontWeight: "bold"
  },
  input: {
    width: "100%",
    padding: 10,
    marginBottom: 20,
    borderRadius: 6,
    border: "1px solid #ccc"
  },
  button: {
    padding: "10px 20px",
    backgroundColor: "#2563eb",
    color: "white",
    border: "none",
    borderRadius: 6,
    cursor: "pointer",
    width: "100%"
  },
  page: {
    padding: 30,
    backgroundColor: "#f0f0f0",
    minHeight: "100vh"
  },
  heading: {
    fontSize: 28,
    textAlign: "center",
    marginBottom: 30
  },
  grid: {
    display: "grid",
    gap: 20,
    gridTemplateColumns: "repeat(auto-fit, minmax(250px, 1fr))"
  },
  card: {
    backgroundColor: "white",
    padding: 20,
    borderRadius: 12,
    boxShadow: "0 2px 10px rgba(0,0,0,0.05)",
    textAlign: "center"
  },
  link: {
    marginTop: 10,
    display: "inline-block",
    color: "#2563eb",
    textDecoration: "underline"
  }
};

export default App;
